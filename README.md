# Seenomaly

Here we show all the GIF examples in our paper

### Figure 1 (a)

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/sheet1.gif" width="300">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/sheet2.gif" width="300">
</div>

### Figure 1 (b)
<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/card2.gif" width="300">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/card1.gif" width="300">
</div>


### Figure 5
<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/5a.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/5b.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/5c.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/5d.gif" width="200">
</div>

### Figure 6
<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6a.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6b.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6c.jpg" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6d.gif" width="200">
</div>

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6e.jpg" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6f.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6g.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/6h.gif" width="200">
</div>

### Figure 7
<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/71.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/72.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/73.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/74.gif" width="200">
</div>

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/75.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/76.jpg" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/77.jpg" width="200">
</div>

### Synthetic examples

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/21.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/22.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/23.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/24.gif" width="200">
</div>

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/81.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/82.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/83.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/84.gif" width="200">
</div>

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/31.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/32.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/33.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/34.gif" width="200">
</div>

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/91.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/92.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/93.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/94.gif" width="200">
</div>

### Here are real-world examples

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/11.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/r17.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/41.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/r617.gif" width="200">
</div>

<div align="center">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/flipcard1.gif" width="200">
    <img src="https://github.com/DehaiZhao/Seenomaly/blob/master/image/flipcard2.gif" width="200">
</div>

We can see that synthetic data has the same visual effect complexity with real-world data, and it is actually not easy data, which means synthetic data can evaluate our model.

## How to use
### Data

1. Download [Rico animation dataset](https://storage.googleapis.com/crowdstf-rico-uiuc-4540/rico_dataset_v0.1/animations.tar.gz) and [Rico interaction traces dataset](https://storage.googleapis.com/crowdstf-rico-uiuc-4540/rico_dataset_v0.1/traces.tar.gz)
2. cd `datasets`.
3. Run `python3 get_data.py` to extract single frame from GIF, which also contains image processing like cleaning static images.
4. Run `python3 get_class.py` to get label file, that is `label.txt`.
5. Run `python3 convert_data_to_tfrecord.py` which read `label.txt` and generate tfrecord.
Note: please change the file directory accoring to your environment.

### Training

Change your own configuration and run `finetune.sh`.

## Demo

### Here are some GIFs selected randomly from our dataset. Apparently, they distribute at random space.

![image](https://github.com/DehaiZhao/Seenomaly/blob/master/image/origin.gif)

### We extract features using our model

![image](https://github.com/DehaiZhao/Seenomaly/blob/master/image/model.jpg)

### And map the features to a low dimension space

![image](https://github.com/DehaiZhao/Seenomaly/blob/master/image/scatter.png)

### Results
**Here shows how the GIFs distribute after clustering. We can see that GIFs with different visual effects distribut at different spaces.**

![image](https://github.com/DehaiZhao/Seenomaly/blob/master/image/cluster.gif)

### Given a linted GUI, We can use KNN to find the most possible category in this space.

**Our model does not simply classify different animation. It can actually distinguish GUIs with the same type of animation but different visual effects, which is demonstrated in this figure:**

![image](https://github.com/DehaiZhao/Seenomaly/blob/master/image/d.png)

The two red circles show the same type of animation (pop-up window) but with different visual effects. One is with black background or shadow (1), which means that the pop-up  window can be distinguished clearly from the background and thus they are treated as normal examples. The other one contains pop-up windows over a non-shadow background (2), and thus are treated as violation examples.

The two green circles show another example - the animation of bottom sheet over a background with/without shadow. Samples with shadow or over black background (3) are treated as normal examples. But those without shadow or black background (4) violate the Material-Design don't guideline regarding the shadow, and thus are treated as violation examples.

This figure illustrates that our model is able to to distinguish normal and violation GUI animations in the feature space. Note that this visualization is only a 2-dimensional visualization of a 2048-dimensional feature space. In this feature space, if a to-be-linited GUI animation has certain violation, it will be place close to the similar animation vioaltion examples. As a result, k-nearest-neighbors vote can idenitfy the likely violation in the to-be-linited animation.




